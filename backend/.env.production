# .env.production - Railway/Producción
# ============================================
# CONFIGURACIÓN PARA RAILWAY
# Copiar estas variables al Railway Dashboard
# ============================================

# ============================================
# SERVIDOR
# ============================================
PORT=8080
HOST=0.0.0.0

# ============================================
# BASE DE DATOS
# ============================================
# Railway provee DATABASE_URL automáticamente
# NO es necesario configurar manualmente
# DATABASE_URL=${{Postgres.DATABASE_URL}}

DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=false

# ============================================
# SEGURIDAD - PRODUCCIÓN
# ============================================
# CRÍTICO: Generar con: openssl rand -hex 32
SECRET_KEY=CAMBIAR-ESTE-SECRET-KEY-EN-RAILWAY-DASHBOARD
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS - Agregar dominios de producción
ALLOWED_ORIGINS=https://tu-frontend.railway.app,https://admin.tu-frontend.railway.app

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# ============================================
# APLICACIÓN - PRODUCCIÓN
# ============================================
APP_NAME=Sistema de Préstamos y Cobranza
APP_VERSION=1.0.0
ENVIRONMENT=production
DEBUG=false
API_V1_STR=/api/v1

# ============================================
# MONITOREO - PRODUCCIÓN
# ============================================
# Sentry (obtener DSN desde sentry.io)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc_dir

# ============================================
# LOGGING - PRODUCCIÓN
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================
# REDIS - PRODUCCIÓN
# ============================================
# Railway provee REDIS_URL si tienes Redis addon
# REDIS_URL=${{Redis.REDIS_URL}}
REDIS_ENABLED=false
REDIS_TTL=3600

# ============================================
# GUNICORN - PRODUCCIÓN
# ============================================
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
TIMEOUT=120
GRACEFUL_TIMEOUT=30
KEEP_ALIVE=5

# ============================================
# UVICORN - PRODUCCIÓN
# ============================================
UVICORN_WORKERS=1
UVICORN_TIMEOUT_KEEP_ALIVE=120
UVICORN_TIMEOUT_GRACEFUL_SHUTDOWN=30

# ============================================
# HEALTH CHECK
# ============================================
HEALTH_CHECK_CACHE_DURATION=30

# ============================================
# BUILD
# ============================================
NIXPACKS_NO_CACHE=1
PYTHONUNBUFFERED=1

# ============================================
# EMAIL - PRODUCCIÓN
# ============================================
# Gmail con App Password o SendGrid/Mailgun
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu-email@gmail.com
SMTP_PASSWORD=tu-app-password
SMTP_FROM=noreply@tusistemaloan.com
SMTP_FROM_NAME=Sistema de Préstamos
EMAIL_ENABLED=true

# ============================================
# TWILIO - PRODUCCIÓN
# ============================================
TWILIO_ACCOUNT_SID=tu-account-sid
TWILIO_AUTH_TOKEN=tu-auth-token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886
SMS_ENABLED=true
WHATSAPP_ENABLED=true

# ============================================
# SCHEDULED TASKS - PRODUCCIÓN
# ============================================
ENABLE_SCHEDULER=true
SCHEDULER_TIMEZONE=America/Asuncion
CRON_NOTIFY_VENCIMIENTOS=0 8 * * *
CRON_CALCULAR_MORA=0 1 * * *
CRON_BACKUP_DB=0 3 * * *

# ============================================
# BUSINESS RULES
# ============================================
TASA_MORA_DIARIA=0.1
MAX_CUOTA_PERCENTAGE=40
MIN_LOAN_AMOUNT=1000000
MAX_LOAN_AMOUNT=50000000
MAX_LOAN_TERM=60

# ============================================
# FILE UPLOADS - PRODUCCIÓN
# ============================================
MAX_UPLOAD_SIZE=10485760
ALLOWED_UPLOAD_EXTENSIONS=.pdf,.jpg,.jpeg,.png,.xlsx,.xls
UPLOAD_DIR=/tmp/uploads

# ============================================
# REPORTES - PRODUCCIÓN
# ============================================
REPORTS_DIR=/tmp/reports
REPORTS_CACHE_ENABLED=true
REPORTS_CACHE_TTL=1800

# ============================================
# FRONTEND - PRODUCCIÓN
# ============================================
FRONTEND_URL=https://tu-frontend.railway.app
FRONTEND_ADMIN_URL=https://admin.tu-frontend.railway.app

# ============================================
# BACKUP - PRODUCCIÓN
# ============================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30

# ============================================
# PERFORMANCE - PRODUCCIÓN
# ============================================
DB_QUERY_TIMEOUT=30
DB_STATEMENT_TIMEOUT=60000
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# ============================================
# SECURITY - PRODUCCIÓN
# ============================================
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=false

# ============================================
# FEATURE FLAGS - PRODUCCIÓN
# ============================================
FEATURE_NOTIFICACIONES=true
FEATURE_REPORTES_PDF=true
FEATURE_DASHBOARD_KPIS=true
FEATURE_EXPORT_EXCEL=true
FEATURE_PRESTAMOS_GRUPALES=false

# ============================================
# INSTRUCCIONES PARA RAILWAY
# ============================================
# 1. Ir a Railway Dashboard → Tu Proyecto
# 2. Click en el servicio backend
# 3. Variables → Raw Editor
# 4. Copiar y pegar estas variables
# 5. Modificar:
#    - SECRET_KEY (generar nuevo)
#    - SENTRY_DSN (obtener de sentry.io)
#    - ALLOWED_ORIGINS (tu dominio real)
#    - SMTP_* (configurar email real)
#    - TWILIO_* (si usas SMS/WhatsApp)
# 6. Deploy automáticamente al guardar
