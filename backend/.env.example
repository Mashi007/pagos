# .env.example - Sistema de Préstamos y Cobranza
# Copia este archivo a .env para desarrollo local
# En Railway, configura estas variables en el Dashboard

# ============================================
# SERVIDOR
# ============================================
PORT=8080
HOST=0.0.0.0

# ============================================
# BASE DE DATOS
# ============================================
# Railway provee DATABASE_URL automáticamente en producción
# Para desarrollo local, usa:
# DATABASE_URL=postgresql://user:password@localhost:5432/prestamos_db

# Producción (Railway):
DATABASE_URL=postgresql://postgres:password@ballast.proxy.rlwy.net:21633/railway

# Configuración de Pool de Conexiones
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ============================================
# SEGURIDAD Y AUTENTICACIÓN
# ============================================
SECRET_KEY=your-secret-key-here-change-this-in-production-min-32-chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# CORS
# ============================================
# Orígenes permitidos (separados por coma)
# En desarrollo: http://localhost:3000,http://localhost:5173
# En producción: https://tu-dominio.railway.app
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,https://tu-dominio.railway.app

# ============================================
# APLICACIÓN
# ============================================
APP_NAME=Sistema de Préstamos y Cobranza
APP_VERSION=1.0.0
ENVIRONMENT=production
DEBUG=false
API_V1_PREFIX=/api/v1

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================
# UVICORN (Servidor)
# ============================================
UVICORN_WORKERS=1
UVICORN_TIMEOUT_KEEP_ALIVE=120
UVICORN_TIMEOUT_GRACEFUL_SHUTDOWN=30

# ============================================
# HEALTH CHECK
# ============================================
HEALTH_CHECK_CACHE_DURATION=30

# ============================================
# BUILD (Nixpacks/Railway)
# ============================================
NIXPACKS_NO_CACHE=1
PYTHONUNBUFFERED=1

# ============================================
# EMAIL (SMTP) - Para Notificaciones
# ============================================
# Configuración para Gmail (recomendado usar App Password)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu-email@gmail.com
SMTP_PASSWORD=tu-app-password-de-16-caracteres
FROM_EMAIL=noreply@prestamos.com
FROM_NAME=Sistema de Préstamos

# Alternativas SMTP:
# SendGrid: smtp.sendgrid.net (Port 587)
# Mailgun: smtp.mailgun.org (Port 587)
# Amazon SES: email-smtp.us-east-1.amazonaws.com (Port 587)

# ============================================
# WHATSAPP (TWILIO) - Para Notificaciones
# ============================================
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your-auth-token-32-chars
TWILIO_WHATSAPP_NUMBER=+14155238886

# Nota: Para WhatsApp, debes activar WhatsApp en tu cuenta Twilio
# Sandbox WhatsApp: whatsapp:+14155238886 (desarrollo)
# Producción: Requiere aprobación de plantillas

# ============================================
# REPORTES
# ============================================
REPORTS_DIR=/tmp/reports

# Configuración de reportes PDF
PDF_LOGO_URL=https://tu-dominio.com/logo.png
PDF_COMPANY_NAME=Tu Empresa de Préstamos S.A.
PDF_COMPANY_RUC=0000000000001
PDF_COMPANY_ADDRESS=Av. Principal 123, Ciudad
PDF_COMPANY_PHONE=+593 99 999 9999

# ============================================
# PAGINACIÓN
# ============================================
DEFAULT_PAGE_SIZE=50
MAX_PAGE_SIZE=100

# ============================================
# CONFIGURACIÓN DE PRÉSTAMOS (Valores por Defecto)
# ============================================
# Tasas de Interés
TASA_INTERES_BASE=15.0
TASA_MORA=2.0
TASA_DESCUENTO_PRONTO_PAGO=1.0

# Límites de Montos
MONTO_MINIMO_PRESTAMO=100.0
MONTO_MAXIMO_PRESTAMO=50000.0

# Límites de Plazos
PLAZO_MINIMO_MESES=1
PLAZO_MAXIMO_MESES=60

# Límites por Cliente
LIMITE_PRESTAMOS_ACTIVOS=3

# ============================================
# NOTIFICACIONES AUTOMÁTICAS
# ============================================
# Recordatorios
DIAS_PREVIOS_RECORDATORIO=3
DIAS_MORA_ALERTA=15
DIAS_MORA_CRITICA=30

# Canales de notificación habilitados
EMAIL_NOTIFICACIONES=true
WHATSAPP_NOTIFICACIONES=false
SMS_NOTIFICACIONES=false

# ============================================
# CONCILIACIÓN BANCARIA
# ============================================
# Tolerancia para matching automático (en dólares)
TOLERANCIA_CONCILIACION=0.50

# Formato de fecha en extractos bancarios
FORMATO_FECHA_EXTRACTO=DD/MM/YYYY

# Columnas requeridas en CSV (separadas por coma)
CSV_COLUMNAS_REQUERIDAS=fecha,referencia,monto,descripcion

# ============================================
# SISTEMA DE APROBACIONES
# ============================================
# Montos que requieren aprobación por nivel
MONTO_APROBACION_GERENTE=10000.0
MONTO_APROBACION_DIRECTOR=50000.0
MONTO_APROBACION_COMITE=100000.0

# Timeout de aprobación (días)
TIMEOUT_APROBACION_DIAS=5

# ============================================
# AUDITORÍA
# ============================================
# Retención de logs de auditoría (días)
AUDITORIA_RETENCION_DIAS=365

# Activar auditoría para tablas específicas
AUDITORIA_CLIENTES=true
AUDITORIA_PRESTAMOS=true
AUDITORIA_PAGOS=true
AUDITORIA_USUARIOS=true

# ============================================
# CACHE (REDIS - Opcional)
# ============================================
# Descomentar si usas Redis para cache
# REDIS_URL=redis://localhost:6379/0
# CACHE_EXPIRE_SECONDS=3600
# CACHE_ENABLED=true

# ============================================
# ARCHIVOS Y UPLOADS
# ============================================
# Directorio temporal para archivos
UPLOAD_DIR=/tmp/uploads
MAX_UPLOAD_SIZE_MB=10

# Tipos de archivos permitidos (separados por coma)
ALLOWED_FILE_TYPES=csv,xlsx,xls,pdf,jpg,png

# ============================================
# CONFIGURACIÓN DE EMPRESA
# ============================================
NOMBRE_EMPRESA=Sistema de Préstamos y Cobranza
RUC_EMPRESA=0000000000001
DIRECCION_EMPRESA=Av. Principal 123, Ciudad, País
TELEFONO_EMPRESA=+593 99 999 9999
EMAIL_EMPRESA=info@prestamos.com
HORARIO_ATENCION=Lunes a Viernes 9:00 - 18:00
ZONA_HORARIA=America/Guayaquil

# ============================================
# FEATURES FLAGS (Activar/Desactivar Funcionalidades)
# ============================================
FEATURE_CONCILIACION_ENABLED=true
FEATURE_REPORTES_ENABLED=true
FEATURE_NOTIFICACIONES_ENABLED=true
FEATURE_APROBACIONES_ENABLED=true
FEATURE_AUDITORIA_ENABLED=true
FEATURE_WHATSAPP_ENABLED=false

# ============================================
# INTEGRACIONES EXTERNAS (Opcional)
# ============================================
# Google Drive (para backup de documentos)
# GOOGLE_DRIVE_ENABLED=false
# GOOGLE_DRIVE_FOLDER_ID=your-folder-id

# Webhook para notificaciones externas
# WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================
# DESARROLLO Y DEBUG
# ============================================
# Solo para desarrollo - NUNCA en producción
# SHOW_SQL_QUERIES=false
# ENABLE_SWAGGER_UI=true
# ENABLE_REDOC=true

# ============================================
# BACKUP Y RECUPERACIÓN
# ============================================
# Configuración de backups automáticos
# BACKUP_ENABLED=false
# BACKUP_SCHEDULE=0 2 * * *  # Diario a las 2 AM
# BACKUP_RETENTION_DAYS=30

# ============================================
# MONITOREO Y MÉTRICAS (Opcional)
# ============================================
# Sentry para tracking de errores
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=production

# DataDog para métricas
# DATADOG_API_KEY=your-datadog-api-key
# DATADOG_ENABLED=false

# ============================================
# VARIABLES ESPECÍFICAS DE RAILWAY
# ============================================
# Estas variables las configura automáticamente Railway:
# - RAILWAY_ENVIRONMENT
# - RAILWAY_PROJECT_ID
# - RAILWAY_SERVICE_ID
# - RAILWAY_DEPLOYMENT_ID
# - RAILWAY_GIT_COMMIT_SHA
# - RAILWAY_GIT_BRANCH

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 1. NUNCA commitear el archivo .env real al repositorio
# 2. Usa valores fuertes para SECRET_KEY (min 32 caracteres)
# 3. En Gmail, habilita "App Passwords" para SMTP
# 4. Para WhatsApp producción, requiere aprobación de Facebook
# 5. Las variables de Railway sobrescriben las del .env
# 6. Reinicia el servicio después de cambiar variables críticas
